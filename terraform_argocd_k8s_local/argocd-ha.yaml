#----------------------------------------------------------------
global:
  domain: argocd.home.sergeysidorenko.com

# Highly Available mode with autoscaling require minimum 3 nodes!
redis-ha:
  enabled: true

controller:
  replicas: 1

server:
  autoscaling:
    enabled: true
    minReplicas: 2

  # Argo CD server ingress configuration
  ingress:
    enabled: true
    ingressClassName: "nginx"
    hostname: "argocd.home.sergeysidorenko.com"
    tls: false

  # Fixing issue with Stuck Processing for Ingress resource
  config:
    resource.customizations: |
      networking.k8s.io/Ingress:
        health.lua: |
          hs = {}
          hs.status = "Healthy"
          return hs       

configs:
  params:
    server.insecure: true

repoServer:
  autoscaling:
    enabled: true
    minReplicas: 2

applicationSet:
  replicas: 2
